--by GGH52Lan
--i remake cuz my old anti fling is bad if alot of player in game u can get low fps
--open source

	local function isPartRotatingTooFast(part, fast)
	fast = fast or 100
		if part and part:IsA("BasePart") then
			local lastRotation = part.Rotation
			wait(0.1) -- Wait a short time to get a second rotation value for comparison
			local currentRotation = part.Rotation
			local rotationChange = (currentRotation - lastRotation).Magnitude
			return rotationChange > fast
		end
		return false
	end

	local function isPartInLocalPlayerCharacter(part)
		local localPlayer = game.Players.LocalPlayer
		if localPlayer and localPlayer.Character then
			return part:IsDescendantOf(localPlayer.Character)
		end
		return false
	end

	local function createSelectionBox(target)
		local outline = Instance.new("SelectionBox")
		outline.Name = "RedOutline"
		outline.Color3 = BrickColor.new("Red").Color
		outline.Adornee = target
		outline.Parent = target
		return outline
	end

local G = {}
local GG = {}
local C = nil
local D;

	local function Collide(plr)
	if plr and plr.Character and plr ~= game.Players.LocalPlayer then
	for i,v in pairs (plr.Character:GetDescendants()) do
	if v:IsA"BasePart" and v.CanCollide == true then
	v.CanCollide = false
	v.AssemblyAngularVelocity = Vector3.new(0, 0, 0)
    v.AssemblyLinearVelocity = Vector3.new(0, 0, 0)
    v.CustomPhysicalProperties = PhysicalProperties.new(0, 0, 0)
	end
	end
	end
	end

	local Players = Game:GetService"Players"
	local plr = Players.LocalPlayer
	
	local function Detect(obj)
    for target, selectionBox in pairs(GG) do
            if target:IsDescendantOf(game.Workspace) and not isPartInLocalPlayerCharacter(target) then
                if not isPartRotatingTooFast(target) then
                    -- If the target is not rotating rapidly, remove the SelectionBox
                    selectionBox:Destroy()
                    table.remove(GG, table.find(GG[target]))
                end
            else
                -- If the target is no longer in the workspace or part of the local player's character, remove the SelectionBox
                selectionBox:Destroy()
                 table.remove(GG, table.find(GG[target]))
            end
        end
	for i,v in pairs(workspace:GetDescendants()) do
	if v:IsA"BasePart" and v.CanCollide == true and isPartRotatingTooFast(v) and not GG[v] then
	v.CanCollide = false
	v.AssemblyAngularVelocity = Vector3.new(0, 0, 0)
    v.AssemblyLinearVelocity = Vector3.new(0, 0, 0)
    v.CustomPhysicalProperties = PhysicalProperties.new(0, 0, 0)
    GG[v] = createSelectionBox(v)
	end
	end
	
	local function Enable()
	if D then
	Detect()
	end
	for i,v in pairs (Players:GetPlayers()) do
	Collide(v)
	end
	end
	
	game:GetService("StarterGui"):SetCore("SendNotification",{
 Title = "GGH52Lan";
 Text = "Executed, V2!";
 Duration = 5;
 Icon = "rbxassetid://14260295451";
})

function G:Enable()
	C = game:GetService"RunService".RenderStepped: Connect (Enable)
        end
function G:Disable()
   C: Disconnect ()
for i,v in pairs(game.Players:GetPlayers()) do
if v ~= plr then
for h,b in pairs(v.Character:GetDescendants()) do
if b:IsA"BasePart" and b.CanCollide == false then
b.CanCollide = true
end
end
end
end
end

function G:Detector()
  if not D then
    D = true
    game:GetService("StarterGui"):SetCore("SendNotification",{
 Title = "GGH52Lan";
 Text = "Detector enabled";
 Duration = 5;
 Icon = "rbxassetid://14260295451";
})
    else
    D = false
    game:GetService("StarterGui"):SetCore("SendNotification",{
 Title = "GGH52Lan";
 Text = "Detector disabled";
 Duration = 5;
 Icon = "rbxassetid://14260295451";
})

    end
end

G:Enable()
return G
